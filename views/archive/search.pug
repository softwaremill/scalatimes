extends ../layout

block content
  header
    div.intro A free, once-weekly Scala news flash. Easy to unsubscribe. Goes out every Thursday.
    div.subscribe
      div#mc_embed_signup
        form#mc-embedded-subscribe-form.validate(action='//scalatimes.us2.list-manage.com/subscribe/post?u=ba834c562d82d9aba5eaf90ba&id=32cef9ab4e', method='post', name='mc-embedded-subscribe-form', target='_blank', novalidate='')
          div#mc_embed_signup_scroll
            div.mc-field-group
              label(for='mce-EMAIL') E-mail address
              input#mce-EMAIL.required.email(type='email', value='', name='EMAIL')
            div#mce-responses.clear
              div#mce-error-response.response(style='display:none')
              div#mce-success-response.response(style='display:none')
            //- real people should not fill this in and expect good things - do not remove this or risk form bot signups
            div(style='position: absolute; left: -5000px;')
              input(type='text', name='b_ba834c562d82d9aba5eaf90ba_32cef9ab4e', tabindex='-1', value='')
            .clear
              input#mc-embedded-subscribe.button(type='submit', value='Subscribe', name='subscribe')

      script(type='text/javascript', src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js')
      script(type='text/javascript')
        |(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';}(jQuery));var $mcj = jQuery.noConflict(true);
    div.logo
      a(href="/")
        span.top
          span &nbsp;&#x22C6;&nbsp;&#x22C6;&nbsp;
          | Est. 2014
          span &nbsp;&#x22C6;&nbsp;&#x22C6;&nbsp;
        span.middle Scala Times
        span.bottom Weekly Scala newspaper
    div.search-container
      form.novalidate(action='/search', method='get', autocomplete='off')
        input(name='query', placeholder='Search...')
        button(type="submit")
          img(src='images/search.svg')
    div.issue-info Search results for: #{searchResult.queryString}

  section.newspaper-body
    section.issue
      table.issue-table
        tbody
          tr
            td
              if searchResult.success
                each result in searchResult.results
                  div.search-result
                    a.search-result-link(href=""+result.fields.url) #{result.fields.title}
                    p
                      em= result.fields.description
                      br
                      em.search-result-author
                        if result.fields.author
                          | #{result.fields.author}
                        if result.fields.twitter_handle
                          | &nbsp;(@#{result.fields.twitter_handle})
                      span.result-date &nbsp;#{result.fields.date.substr(0,10)}
                div.pagination-box
                  span
                    if searchResult.previousUrl
                      a(href="" + searchResult.previousUrl) &laquo; Previous
                  span
                    if searchResult.nextUrl
                      a(href="" + searchResult.nextUrl) Next &raquo;
              else if !searchResult.success
                div.search-result--no-results
                  != searchResult.message

        tfoot
          tr
            td
              br
              br
              br
              br
              br
    section.left-column.archive.column
      ol
        each campaign in campaigns
          li
            a.issue-link(href="/"+campaign.id)
              h2.issue-title= campaign.title
              p= campaign.excerpt
            hr

    section.right-column.archive.column
      div.sml-ad-container
        div.sml-ad Organizing an event? <br/>
          a(href="/events") Promote it&nbsp;
          | with <br/> Scala Times.
        div.sml-ad The Scala Times reader? <br/>
          a(href="/banners") Get a banner!
        div.sml-ad Got a tip? 
          a(href="mailto:scalatimes@softwaremill.com") Send it in
          |!<br>Follow us on 
          a(href="http://twitter.com/scalatimes") Twitter
          //- |.<br>Want ST banner for your blog? 
          //- a(href="") Take one
          |.<br>Curated by 
          a(href="http://softwaremill.com") SoftwareMill
          |.<br>We are 
          a(href="https://softwaremill.com/join-us/") hiring
          |.<br>And 
          a(href="https://softwaremill.com/portfolio/") taking on projects
          |.
      ol

  section.other-archives
    div.archive.column
      ol
    div.archive.column
      ol
    div.archive.column
      ol
    div.archive.column
      ol
    div.archive.column
      ol
